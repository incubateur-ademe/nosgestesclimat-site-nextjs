'use client'

import { endClickHedgehog } from '@/constants/tracking/pages/end'
import { trackEvent } from '@/utils/matomo/trackEvent'
import { useEffect, useState } from 'react'
import { twMerge } from 'tailwind-merge'

type Props = {
  setIsHedgehog: (isHedgehog: boolean) => void
}

export default function Hedgehog({ setIsHedgehog }: Props) {
  const [isVisible, setIsVisible] = useState(false)

  useEffect(() => {
    let timerShowHedgehog: NodeJS.Timeout
    let timerHideHedgehog: NodeJS.Timeout
    const showHedgehog = () => {
      setIsVisible(true)
      timerHideHedgehog = setTimeout(hideHedgehog, 2000)
    }
    const hideHedgehog = () => {
      setIsVisible(false)
      timerShowHedgehog = setTimeout(showHedgehog, 60000)
    }
    hideHedgehog()

    return () => {
      if (timerShowHedgehog) {
        clearTimeout(timerShowHedgehog)
      }
      if (timerHideHedgehog) {
        clearTimeout(timerHideHedgehog)
      }
    }
  }, [])

  return (
    <svg
      width="32"
      height="32"
      viewBox="0 0 32 32"
      fill="none"
      xmlns="http://www.w3.org/2000/svg"
      className={twMerge(
        'absolute right-0 top-0 h-6 w-6 -translate-x-full transform cursor-pointer transition-transform duration-1000',
        isVisible ? '-translate-y-3/4' : 'translate-y-0'
      )}
      onClick={() => {
        trackEvent(endClickHedgehog)
        setIsHedgehog(true)
      }}>
      <path
        d="M25.5004 18.0551C25.5004 23.304 21.248 27.5555 16 27.5555C10.7528 27.5555 6.49951 23.304 6.49951 18.0551C6.49951 12.808 10.7537 8.55377 16 8.55377C21.248 8.55466 25.5004 12.808 25.5004 18.0551V18.0551Z"
        fill="#6D6E71"
      />
      <path
        d="M23.111 29.7778H8.88878C7.40878 29.7778 6.68522 28.5875 6.43278 27.7244L4.06478 27.6747C3.92878 27.672 3.80078 27.6062 3.719 27.4969C3.63722 27.3884 3.60967 27.2471 3.64522 27.1147L4.17322 25.1449L1.999 24.5662C1.86389 24.5298 1.75367 24.4329 1.70122 24.3031C1.64878 24.1733 1.66033 24.0267 1.73233 23.9075L2.79811 22.136L0.881666 21.0764C0.75811 21.008 0.674554 20.8844 0.655888 20.744C0.63811 20.6044 0.687888 20.464 0.79011 20.3653L2.327 18.9013L0.79011 17.4382C0.687888 17.3404 0.63811 17.2 0.655888 17.0595C0.674554 16.9191 0.75811 16.7955 0.881666 16.7271L2.79811 15.6658L1.73144 13.8933C1.65944 13.7733 1.64789 13.6267 1.70033 13.4978C1.75278 13.368 1.863 13.2711 1.99811 13.2347L4.17233 12.6569L3.64433 10.6853C3.60878 10.5538 3.63633 10.4124 3.71811 10.3031C3.79989 10.1938 3.92789 10.1289 4.06478 10.1253L6.35367 10.0782L6.40522 8.03199C6.40878 7.89955 6.471 7.7751 6.57589 7.69333C6.68078 7.61155 6.81678 7.58044 6.94567 7.60977L9.18655 8.10844L9.82389 6.12266C9.86389 5.9991 9.95544 5.89955 10.0746 5.84888C10.1954 5.7991 10.3306 5.80355 10.4452 5.86133L12.4754 6.87377L13.6674 5.08799C13.7386 4.98221 13.8523 4.9111 13.9786 4.89421C14.1074 4.87733 14.2337 4.91555 14.3288 4.99999L15.9999 6.45155L17.671 4.99733C17.7679 4.91377 17.8941 4.87555 18.0221 4.89244C18.1492 4.90933 18.2612 4.98044 18.3332 5.08621L19.5243 6.87199L21.5563 5.85955C21.6719 5.80177 21.8079 5.79821 21.927 5.8471C22.047 5.89777 22.1377 5.99733 22.1777 6.12088L22.8141 8.10666L25.055 7.60799C25.1848 7.57955 25.3199 7.60977 25.4248 7.69155C25.5297 7.77333 25.5919 7.89777 25.5954 8.03021L25.647 10.0764L27.935 10.1235C28.071 10.1262 28.199 10.192 28.2808 10.3013C28.3634 10.4107 28.3901 10.552 28.3546 10.6835L27.8257 12.6542L30.0026 13.232C30.1377 13.2675 30.2479 13.3653 30.3012 13.4951C30.3537 13.6249 30.3421 13.7715 30.2701 13.8907L29.2026 15.6631L31.1181 16.7244C31.2426 16.7929 31.3252 16.9164 31.3439 17.0569C31.3626 17.1973 31.3119 17.3378 31.2097 17.4355L29.6728 18.8987L31.2097 20.3627C31.3119 20.4604 31.3626 20.6018 31.3439 20.7413C31.3252 20.8818 31.2426 21.0053 31.1181 21.0738L29.2034 22.1333L30.2701 23.9049C30.3421 24.0249 30.3537 24.1715 30.3012 24.3004C30.2479 24.4302 30.1377 24.5271 30.0034 24.5635L27.8257 25.1422L28.3546 27.112C28.3901 27.2435 28.3634 27.3849 28.2817 27.4942C28.199 27.6035 28.0719 27.6693 27.935 27.672L25.5679 27.7218C25.3146 28.5875 24.591 29.7778 23.111 29.7778V29.7778Z"
        fill="#662113"
      />
      <path
        d="M14.3891 25.6213C14.3696 25.6213 14.35 25.6204 14.3305 25.6178C14.2034 25.6009 14.0905 25.5298 14.0194 25.4231L13.0789 24.0142L11.4745 24.8133C11.358 24.8702 11.2229 24.8755 11.1029 24.8258C10.9838 24.7751 10.8923 24.6755 10.8523 24.5511L10.3509 22.9893L8.58204 23.3822C8.45048 23.4098 8.31626 23.3795 8.21137 23.2978C8.10648 23.216 8.04426 23.0924 8.0407 22.9591L8.0007 21.3555L6.19715 21.3173C6.06115 21.3147 5.93315 21.2489 5.85137 21.1395C5.76959 21.0311 5.74204 20.8898 5.77759 20.7573L6.19004 19.2178L4.48337 18.7644C4.34826 18.728 4.23803 18.6311 4.18559 18.5013C4.13315 18.3715 4.1447 18.2249 4.2167 18.1058L5.04959 16.7218L3.54915 15.8915C3.4247 15.8231 3.34115 15.6995 3.32337 15.5591C3.30559 15.4187 3.35537 15.2782 3.45759 15.1804L4.65937 14.0347L3.45759 12.8907C3.35537 12.7929 3.30559 12.6524 3.32337 12.512C3.34203 12.3715 3.42559 12.248 3.54915 12.1795L5.05048 11.3484L4.21759 9.96355C4.14559 9.84355 4.13403 9.69688 4.18648 9.56799C4.23892 9.43822 4.34915 9.34133 4.48426 9.30488L6.1927 8.85066L5.77848 7.31111C5.74292 7.17955 5.77048 7.03822 5.85226 6.92888C5.93404 6.81955 6.06204 6.75466 6.19892 6.75111L8.00248 6.71377L8.04248 5.10933C8.04604 4.97688 8.10826 4.85244 8.21315 4.77066C8.31715 4.68888 8.45315 4.65777 8.58292 4.68711L10.3518 5.07999L10.8531 3.51911C10.8931 3.39555 10.9847 3.29599 11.1038 3.24533C11.2247 3.19644 11.3589 3.19999 11.4754 3.25777L13.0798 4.05688L14.0203 2.64888C14.0914 2.54311 14.2043 2.47199 14.3314 2.45511C14.4594 2.43644 14.5865 2.47644 14.6825 2.56088L15.9998 3.70844L17.3189 2.56088C17.4158 2.47644 17.5438 2.43822 17.67 2.45511C17.7971 2.47199 17.9091 2.54311 17.9811 2.64888L18.9207 4.05599L20.5269 3.25599C20.6425 3.19911 20.7785 3.19466 20.8976 3.24444C21.0176 3.29511 21.1083 3.39466 21.1483 3.51822L21.6478 5.07911L23.4176 4.68622C23.5474 4.65688 23.6843 4.68799 23.7874 4.76977C23.8923 4.85155 23.9545 4.97599 23.958 5.10933L23.998 6.71288L25.8007 6.75022C25.9367 6.75288 26.0647 6.81866 26.1465 6.92799C26.2291 7.03733 26.2558 7.17866 26.2203 7.31022L25.8069 8.85155L27.5171 9.30577C27.6523 9.34222 27.7625 9.43911 27.8158 9.56888C27.8683 9.69866 27.8567 9.84533 27.7847 9.96444L26.9509 11.3493L28.4523 12.1804C28.5767 12.2489 28.6594 12.3724 28.678 12.5129C28.6967 12.6533 28.646 12.7938 28.5438 12.8915L27.3411 14.0355L28.5438 15.1813C28.646 15.2791 28.6967 15.4195 28.678 15.56C28.6594 15.7004 28.5758 15.8231 28.4523 15.8924L26.9518 16.7227L27.7856 18.1067C27.8576 18.2267 27.8691 18.3733 27.8167 18.5022C27.7634 18.6311 27.6531 18.7289 27.5189 18.7653L25.8078 19.2204L26.2211 20.76C26.2567 20.8915 26.23 21.0329 26.1483 21.1422C26.0656 21.2515 25.9385 21.3173 25.8016 21.32L23.9989 21.3582L23.9589 22.9618C23.9554 23.0942 23.8931 23.2187 23.7883 23.3004C23.6843 23.3822 23.5474 23.4124 23.4185 23.3849L21.6487 22.992L21.1491 24.5538C21.1091 24.6773 21.0185 24.7778 20.8985 24.8284C20.7794 24.88 20.646 24.8755 20.5278 24.816L18.9225 24.0169L17.982 25.4258C17.9109 25.5324 17.798 25.6027 17.6709 25.6204C17.5447 25.6364 17.4167 25.5991 17.3198 25.5147L15.9998 24.3618L14.6816 25.512C14.5998 25.5831 14.4958 25.6213 14.3891 25.6213Z"
        fill="#8A4B38"
      />
      <path
        d="M11.9999 24.0462H19.9999C23.1297 24.0462 25.7777 26.3351 25.7777 28.0462C25.7777 29.5129 24.5777 29.824 23.1111 29.824H8.88883C7.42217 29.824 6.22217 29.5129 6.22217 28.0462C6.22217 26.3351 8.87995 24.0462 11.9999 24.0462Z"
        fill="#8A4B38"
      />
      <path
        d="M23.3083 20.248C23.3083 23.8818 20.0372 26.824 15.9999 26.824C11.9625 26.824 8.69141 23.8818 8.69141 20.248C8.69141 16.6151 11.9625 13.6702 15.9999 13.6702C20.0372 13.6702 23.3083 16.6151 23.3083 20.248Z"
        fill="#D99E82"
      />
      <path
        d="M18.9238 23.5369C18.9238 25.3529 17.6144 26.8249 16.0002 26.8249C14.386 26.8249 13.0767 25.3529 13.0767 23.5369C13.0767 21.7209 14.3851 20.2489 16.0002 20.2489C17.6153 20.2489 18.9238 21.72 18.9238 23.5369Z"
        fill="#E6E7E8"
      />
      <path
        d="M17.4621 24.632C17.4621 25.4391 16.8078 26.0942 15.9998 26.0942C15.1918 26.0942 14.5376 25.44 14.5376 24.632C14.5376 23.8249 15.1918 23.1724 15.9998 23.1724C16.8078 23.1724 17.4621 23.8249 17.4621 24.632ZM13.0763 19.1511C13.0763 19.7573 12.5856 20.248 11.9803 20.248C11.3749 20.248 10.8843 19.7564 10.8843 19.1511C10.8843 18.5467 11.3749 18.056 11.9803 18.056C12.5856 18.0551 13.0763 18.5467 13.0763 19.1511V19.1511ZM21.1154 19.1511C21.1154 19.7573 20.6247 20.248 20.0203 20.248C19.4141 20.248 18.9243 19.7564 18.9243 19.1511C18.9243 18.5467 19.4149 18.056 20.0203 18.056C20.6247 18.0551 21.1154 18.5467 21.1154 19.1511V19.1511Z"
        fill="#231F20"
      />
      <path
        d="M10.1528 15.8631C10.1528 15.8631 13.8071 14.4018 14.5377 15.8631C15.2693 17.3244 15.9999 17.3244 15.9999 17.3244V12.9387C15.9999 12.9395 10.1528 12.9395 10.1528 15.8631V15.8631ZM21.8462 15.8631C21.8462 15.8631 18.1928 14.4018 17.4613 15.8631C16.7306 17.3244 15.9999 17.3244 15.9999 17.3244V12.9387C15.9999 12.9395 21.8462 12.9395 21.8462 15.8631V15.8631Z"
        fill="#C1694F"
      />
      <path
        d="M10.8842 16.2275C10.8842 17.2373 10.0664 18.0551 9.05754 18.0551C8.04776 18.0551 7.22998 17.2373 7.22998 16.2275C7.22998 15.2187 8.04776 14.4009 9.05754 14.4009C10.0664 14.4009 10.8842 15.2187 10.8842 16.2275V16.2275ZM24.7695 16.2275C24.7695 17.2373 23.9518 18.0551 22.942 18.0551C21.9331 18.0551 21.1144 17.2373 21.1144 16.2275C21.1144 15.2187 21.9331 14.4009 22.942 14.4009C23.9518 14.4009 24.7695 15.2187 24.7695 16.2275ZM9.77754 31.1111C7.99976 31.1111 7.99976 27.5555 11.5553 27.5555C15.1109 27.5555 15.166 31.1111 13.3331 31.1111H9.77754ZM18.6664 31.1111C16.8886 31.1111 16.8886 27.5555 20.4442 27.5555C23.9998 27.5555 24.0549 31.1111 22.222 31.1111H18.6664Z"
        fill="#D99E82"
      />
    </svg>
  )
}
